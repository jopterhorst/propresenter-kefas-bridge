<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self'; font-src 'self';" />
    <title>Settings - ProPresenter Kefas Bridge</title>
    <link rel="stylesheet" href="styles/settings.css" />

  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>Settings</h1>
        <p>Configure ProPresenter and Kefas integration</p>
      </div>

      <!-- Kefas Card -->
      <div class="card">
        <h3>
          Kefas API
        </h3>
        <div class="form-group">
          <label for="tokenInput">API Token</label>
          <div class="password-input-wrapper">
            <input 
              type="password" 
              id="tokenInput" 
              placeholder="Paste your Kefas API token"
            />
            <button type="button" class="password-toggle-btn" id="tokenToggle">Show</button>
          </div>
          <p class="info-text">Your token is stored locally and never sent anywhere except Kefas API.</p>
        </div>
      </div>

      <!-- ProPresenter Card -->
      <div class="card">
        <h3>
          ProPresenter API
        </h3>
        <div class="form-group">
          <label for="hostInput">API Host / IP Address</label>
          <input 
            type="text" 
            id="hostInput" 
            placeholder="127.0.0.1"
          />
          <p class="info-text">IP address or hostname of the ProPresenter machine. Default: 127.0.0.1 (localhost)</p>
        </div>

        <div class="form-group" style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.08); padding-top: 12px;">
          <label for="portInput">API Port</label>
          <input 
            type="number" 
            id="portInput" 
            placeholder="55056"
            min="1"
            max="65535"
          />
          <p class="info-text">Default port is 55056. Change if ProPresenter is running on a different port.</p>
        </div>
      </div>

      <!-- Notes Feature Card -->
      <div class="card">
        <h3>
          Notes Feature
        </h3>
        <div class="form-group">
          <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-weight: 500; cursor: pointer;">
            <input type="checkbox" id="useNotesToggle" style="cursor: pointer;">
            <span>Use Notes Instead of Text</span>
          </label>
          <p class="info-text">When the trigger string is found in slide text, use the notes field instead. If slide only contains this string, it's considered empty.</p>
        </div>

        <div class="form-group" style="margin-top: 16px; border-top: 1px solid rgba(0,0,0,0.08); padding-top: 16px;">
          <label for="notesTriggerInput">Notes Trigger String</label>
          <input 
            type="text" 
            id="notesTriggerInput" 
            placeholder="Current Slide Notes"
          />
          <p class="info-text">If slide text contains this string, use notes attribute instead. Default: "Current Slide Notes"</p>
        </div>
      </div>

      <!-- Stream Reconnection Card -->
      <div class="card">
        <h3>
          Stream Reconnection
        </h3>
        <div class="form-group">
          <label for="maxReconnectInput">Max Reconnection Attempts</label>
          <input 
            type="number" 
            id="maxReconnectInput" 
            placeholder="3"
            min="1"
            max="10"
          />
          <p class="info-text">Number of attempts to reconnect if the ProPresenter connection drops. Default: 3</p>
        </div>

        <div class="form-group" style="margin-top: 12px; border-top: 1px solid rgba(0,0,0,0.08); padding-top: 12px;">
          <label for="reconnectDelayInput">Reconnection Delay (seconds)</label>
          <input 
            type="number" 
            id="reconnectDelayInput" 
            placeholder="5"
            min="1"
            max="60"
          />
          <p class="info-text">Wait time between reconnection attempts in seconds. Default: 5</p>
        </div>
      </div>

      <!-- Debug Card -->
      <div class="card">
        <h3>
          Debug
        </h3>
        <div class="form-group">
          <label style="display: flex; align-items: center; gap: 8px; margin-bottom: 0; font-weight: 500; cursor: pointer;">
            <input type="checkbox" id="debugToggle" style="cursor: pointer;">
            <span>Debug Mode</span>
          </label>
          <p class="info-text" style="margin-top: 8px;">Enable verbose logging to browser console. Press Ctrl+Shift+I (or Cmd+Option+I on macOS) to view logs.</p>
        </div>
      </div>

      <!-- Save Button -->
      <button class="btn-primary" id="saveBtn" style="margin-top: 8px; margin-bottom: 32px;">Save and Close</button>
    </div>

    <script src="scripts/settings.js"></script>
  </body>
</html>
